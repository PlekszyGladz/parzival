@import "~bulma/sass/utilities/initial-variables";

$modal-z: 1000;
$modal-content-width: calc(100vw - $modal-content-spacing-mobile);

@import "~bulma/bulma.sass";

@font-face {
  font-family: "Junicode";
  src: url("./fonts/Junicode.woff") format("woff"), url("./fonts/Junicode.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: "Junicode";
  src: url("./fonts/Junicode-Bold.woff") format("woff"), url("./fonts/Junicode-Bold.ttf") format("truetype");
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: "Junicode";
  src: url("./fonts/Junicode-Italic.woff") format("woff"), url("./fonts/Junicode-Italic.ttf") format("truetype");
  font-weight: normal;
  font-style: italic;
}

@font-face {
  font-family: "Junicode";
  src: url("./fonts/Junicode-BoldItalic.woff") format("woff"), url("./fonts/Junicode-BoldItalic.ttf") format("truetype");
  font-weight: bold;
  font-style: italic;
}

.has-junicode {
  font-family: "Junicode", serif;
}

.modal-open {
  overflow: hidden;
}

.parzival-home:before {
  content: ' ';
  display: block;
  position: absolute;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  opacity: 0.2;
  background-image: url("/iiif/v001r.ptif/100,100,2000,2000/1000,/0/default.jpg");
  background-size: cover;
}

.parzival-location {
  position: fixed;
  padding: 0.25rem 0.75rem;
}

.parzival-navigation-controls {
  position: fixed;
}

@include desktop {
  .parzival-location {
    top: 4.25rem;
    right: 1.5rem;
  }

  .parzival-navigation-controls {
    top: 1.5rem;
    right: 1.5rem;
  }

  .parzival-quire-view {
    left: 0.75rem;
    bottom: 0.75rem;
  }
}

@include touch {
  .parzival-location {
    bottom: 3.25rem;
    left: 1.5rem;
  }

  .parzival-navigation-controls {
    bottom: 1.5rem;
    left: 1.5rem;
  }

  .parzival-quire-view {
    right: 0.75rem;
    top: 0.75rem;
  }
}

.parzival-facsimile-viewer {
  background: $black;
  position: relative;
  height: 100%;

  .parzival-facsimile {
    height: 100%;

    .displayregion {
      border-color: $white !important;
    }
  }

  .parzival-facsimile-nav {
    background: transparent;
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
  }

  .parzival-quire-view {
    position: absolute;
    background: rgba($white, 0.5);
    width: 3 * $gap;
    height: $gap;
  }
}

.parzival-overview {
  color: $white;

  .parzival-facsimile-slide {
    cursor: pointer;
    img {
      display: block;
      width: auto;
      height: 128px;
      margin: 0 auto;
    }

    p {
      margin: #{0.25 * $gap} #{0.5 * $gap};
      text-align: center;

      &.available {
        color: $primary;
        font-weight: bold;
      }
    }

    &.is-active p {
      background: $primary;
      &.available {
        background: $white;
      }
    }
  }
}

.parzival-page-facsimile, .parzival-transcript-view {
  height: 100vh;
}

.parzival-transcript {
  .is-loading {
    position: relative;
    height: 100%;
    pointer-events: none;
    &:after {
      @include loader;
      position: absolute;
      top: 0.75rem;
      left: 0.75rem;
      width: 2rem;
      height: 2rem;
      border-width: 0.25em;
    }
  }

  .parzival-transcript-view .tile {

    &.is-ancestor {
      margin: 0 !important;
    }

    &.is-ancestor, &.is-parent, &.is-child {
      background-color: $black;
      height: 100%;
      overflow-y: auto;
    }

    .message, .box, .pagination {
      margin: 0.75rem  1.5rem;
    }
  }
  .parzival-column-heading {
    color: $info;
    margin: $size-5 0;
  }
  .table .parzival-heading {
    font-style: italic;
    text-align: right;
    //border-bottom: 1px solid $grey;
    //background: $grey-lighter;
    padding: $size-7 $size-6;

    @include mobile {
      font-size: $size-6
    }

    @include tablet {
      font-size: $size-7
    }

    @include desktop {
      font-size: $size-6
    }
  }

  .parzival-verse-num {
    color: $info;
    font-size: $size-7
  }

  .parzival-verse {
    font-family: "Junicode", serif;

    @include mobile {
      font-size: $size-5
    }

    @include tablet {
      font-size: $size-6
    }

    @include desktop {
      font-size: $size-5
    }
  }

  .hi {

    &.red {
      color: $danger;
    }

    &.lines-7, &.lines-6, &.lines-5, &.lines-4 {
      font-size: $size-3;
      font-weight: bold;
      color: $danger;
    }

    &.lines-3 {
      font-size: $size-4;
      font-weight: bold;
      color: $danger;
    }

    &.lines-2, &.lines-1 {
      font-size: $size-5;
    }
  }

  .lb {
    color: $grey;

    &.wb::before {
      content: " "
    }

    &.wb::after {
      content: " "
    }
  }

  .supplied {
    &.corr {
      text-decoration: underline dotted;
    }

    &.ex::before {
      content: "("
    }

    &.ex::after {
      content: ")"
    }
  }

  .edited {
    font-style: italics;

    &.del {
      text-decoration: line-through;
    }
  }

  .table td, .table th {
    border: none;
    vertical-align: middle;
    padding: 0 0.25rem;
  }

  .table th {
    text-align: right;
    width: 4rem;
  }
}